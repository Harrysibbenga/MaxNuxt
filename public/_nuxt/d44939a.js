(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{563:function(t,e,o){var map={"./af":428,"./af.js":428,"./ar":429,"./ar-dz":430,"./ar-dz.js":430,"./ar-kw":431,"./ar-kw.js":431,"./ar-ly":432,"./ar-ly.js":432,"./ar-ma":433,"./ar-ma.js":433,"./ar-sa":434,"./ar-sa.js":434,"./ar-tn":435,"./ar-tn.js":435,"./ar.js":429,"./az":436,"./az.js":436,"./be":437,"./be.js":437,"./bg":438,"./bg.js":438,"./bm":439,"./bm.js":439,"./bn":440,"./bn-bd":441,"./bn-bd.js":441,"./bn.js":440,"./bo":442,"./bo.js":442,"./br":443,"./br.js":443,"./bs":444,"./bs.js":444,"./ca":445,"./ca.js":445,"./cs":446,"./cs.js":446,"./cv":447,"./cv.js":447,"./cy":448,"./cy.js":448,"./da":449,"./da.js":449,"./de":450,"./de-at":451,"./de-at.js":451,"./de-ch":452,"./de-ch.js":452,"./de.js":450,"./dv":453,"./dv.js":453,"./el":454,"./el.js":454,"./en-au":455,"./en-au.js":455,"./en-ca":456,"./en-ca.js":456,"./en-gb":457,"./en-gb.js":457,"./en-ie":458,"./en-ie.js":458,"./en-il":459,"./en-il.js":459,"./en-in":460,"./en-in.js":460,"./en-nz":461,"./en-nz.js":461,"./en-sg":462,"./en-sg.js":462,"./eo":463,"./eo.js":463,"./es":464,"./es-do":465,"./es-do.js":465,"./es-mx":466,"./es-mx.js":466,"./es-us":467,"./es-us.js":467,"./es.js":464,"./et":468,"./et.js":468,"./eu":469,"./eu.js":469,"./fa":470,"./fa.js":470,"./fi":471,"./fi.js":471,"./fil":472,"./fil.js":472,"./fo":473,"./fo.js":473,"./fr":474,"./fr-ca":475,"./fr-ca.js":475,"./fr-ch":476,"./fr-ch.js":476,"./fr.js":474,"./fy":477,"./fy.js":477,"./ga":478,"./ga.js":478,"./gd":479,"./gd.js":479,"./gl":480,"./gl.js":480,"./gom-deva":481,"./gom-deva.js":481,"./gom-latn":482,"./gom-latn.js":482,"./gu":483,"./gu.js":483,"./he":484,"./he.js":484,"./hi":485,"./hi.js":485,"./hr":486,"./hr.js":486,"./hu":487,"./hu.js":487,"./hy-am":488,"./hy-am.js":488,"./id":489,"./id.js":489,"./is":490,"./is.js":490,"./it":491,"./it-ch":492,"./it-ch.js":492,"./it.js":491,"./ja":493,"./ja.js":493,"./jv":494,"./jv.js":494,"./ka":495,"./ka.js":495,"./kk":496,"./kk.js":496,"./km":497,"./km.js":497,"./kn":498,"./kn.js":498,"./ko":499,"./ko.js":499,"./ku":500,"./ku.js":500,"./ky":501,"./ky.js":501,"./lb":502,"./lb.js":502,"./lo":503,"./lo.js":503,"./lt":504,"./lt.js":504,"./lv":505,"./lv.js":505,"./me":506,"./me.js":506,"./mi":507,"./mi.js":507,"./mk":508,"./mk.js":508,"./ml":509,"./ml.js":509,"./mn":510,"./mn.js":510,"./mr":511,"./mr.js":511,"./ms":512,"./ms-my":513,"./ms-my.js":513,"./ms.js":512,"./mt":514,"./mt.js":514,"./my":515,"./my.js":515,"./nb":516,"./nb.js":516,"./ne":517,"./ne.js":517,"./nl":518,"./nl-be":519,"./nl-be.js":519,"./nl.js":518,"./nn":520,"./nn.js":520,"./oc-lnc":521,"./oc-lnc.js":521,"./pa-in":522,"./pa-in.js":522,"./pl":523,"./pl.js":523,"./pt":524,"./pt-br":525,"./pt-br.js":525,"./pt.js":524,"./ro":526,"./ro.js":526,"./ru":527,"./ru.js":527,"./sd":528,"./sd.js":528,"./se":529,"./se.js":529,"./si":530,"./si.js":530,"./sk":531,"./sk.js":531,"./sl":532,"./sl.js":532,"./sq":533,"./sq.js":533,"./sr":534,"./sr-cyrl":535,"./sr-cyrl.js":535,"./sr.js":534,"./ss":536,"./ss.js":536,"./sv":537,"./sv.js":537,"./sw":538,"./sw.js":538,"./ta":539,"./ta.js":539,"./te":540,"./te.js":540,"./tet":541,"./tet.js":541,"./tg":542,"./tg.js":542,"./th":543,"./th.js":543,"./tk":544,"./tk.js":544,"./tl-ph":545,"./tl-ph.js":545,"./tlh":546,"./tlh.js":546,"./tr":547,"./tr.js":547,"./tzl":548,"./tzl.js":548,"./tzm":549,"./tzm-latn":550,"./tzm-latn.js":550,"./tzm.js":549,"./ug-cn":551,"./ug-cn.js":551,"./uk":552,"./uk.js":552,"./ur":553,"./ur.js":553,"./uz":554,"./uz-latn":555,"./uz-latn.js":555,"./uz.js":554,"./vi":556,"./vi.js":556,"./x-pseudo":557,"./x-pseudo.js":557,"./yo":558,"./yo.js":558,"./zh-cn":559,"./zh-cn.js":559,"./zh-hk":560,"./zh-hk.js":560,"./zh-mo":561,"./zh-mo.js":561,"./zh-tw":562,"./zh-tw.js":562};function n(t){var e=d(t);return o(e)}function d(t){if(!o.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}n.keys=function(){return Object.keys(map)},n.resolve=d,t.exports=n,n.id=563},679:function(t,e,o){"use strict";o.r(e);o(85),o(63),o(13),o(18);var n=o(426),d=o.n(n),l=o(123),c=o(20),r={components:{mdbInput:l.mdbInput,mdbBtn:l.mdbBtn,mdbContainer:l.mdbContainer,mdbModalHeader:l.mdbModalHeader,mdbModalTitle:l.mdbModalTitle,mdbModalBody:l.mdbModalBody,mdbModalFooter:l.mdbModalFooter,mdbModal:l.mdbModal,mdbCol:l.mdbCol,mdbRow:l.mdbRow},filters:{formatDate:function(t){if(!t)return"-";var e=t;return d()(e).format("Do MMM YYYY")}},data:function(){return{section:{alt:"",url:"",videoId:"",id:"",name:""},msg:{message:"",type:""},existsModal:!1,uploadVideo:!1,updatedVideo:null,selectVideoModel:!1,file:"",video:{id:"",content:"",alt:""},type:"",defaultImage:"https://firebasestorage.googleapis.com/v0/b/jhr-developments-c5bba.appspot.com/o/images%2Fimg-placeholder.png?alt=media&token=7d9c5978-d45d-4049-91d9-ceb235823db7"}},computed:{videoContent:function(){return this.$store.getters["videoSection/getVideo"][0]},videoList:function(){return this.$store.getters["videos/getVideos"]},uploadMsg:function(){return this.$store.getters["videos/getMsg"]}},created:function(){var t=this;setTimeout((function(){t.section={id:t.videoContent.id,url:t.videoContent.url,alt:t.videoContent.alt,videoId:t.videoContent.videoId}}),1500)},methods:{reset:function(){this.section={id:this.videoContent.id,url:this.videoContent.url,alt:this.videoContent.alt,videoId:this.videoContent.videoId},this.file="",this.video={id:"",content:"",alt:""},this.type=""},updateContent:function(){var t=this;c.o.doc(this.section.id).update({videoId:this.section.videoId,url:this.section.url,alt:this.section.alt,createdOn:new Date}).then((function(){t.reset(),t.msg={type:"success",message:"Video updated"},setTimeout((function(){t.msg={type:"",message:""}}),2e3)})).catch((function(e){t.msg={type:"warning",message:e.message},setTimeout((function(){t.msg={type:"",message:""}}),2e3)}))},newVideo:function(){this.uploadVideo=!0},checkFile:function(t){var e=this;this.file=t.target.files[0],c.n.where("name","==",this.file.name).get().then((function(t){t.forEach((function(t){t.exists&&(e.existsModal=!0,e.uploadVideo=!1,e.video.content=t.data(),e.video.id=t.id)}))}))},saveFile:function(){var t=this,e={};e.file=this.file,e.alt=this.video.alt,this.$store.dispatch("videos/uploadVideo",e).then((function(video){t.video.content=video,t.section.videoId=t.video.content.id,t.section.url=t.video.content.url,t.section.alt=t.video.alt})).then((function(){t.$store.dispatch("global/setLoading",!1),t.file="",t.video.alt="",setTimeout((function(){t.uploadVideo=!1}),2e3)}))},closeVideoUpload:function(){this.uploadVideo=!1,this.type="",this.file="",this.video.alt=""},confirmUse:function(){this.section.videoId=this.video.id,this.existsModal=!1,this.section.url=this.video.content.url,this.section.alt=this.video.content.alt,this.type="",this.file="",this.video.alt=""},declineUse:function(){this.existsModal=!1,this.video.content="",this.video.id="",this.type="",this.file="",this.video.alt=""},submitForm:function(){this.updateContent()},selectVideo:function(){this.selectVideoModel=!0},selectedVideo:function(video){this.section.videoId=video.id,this.section.url=video.url,this.section.alt=video.alt},saveSelection:function(){this.selectVideoModel=!1,this.updateContent()}}},m=r,v=o(77),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("mdb-container",[o("mdb-row",[o("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[o("mdb-col",{staticClass:"text-center pt-2"},[t.section.videoId?o("video",{staticClass:"video-fluid z-depth-1",attrs:{autoplay:"",loop:"",muted:""},domProps:{muted:!0}},[o("source",{attrs:{src:t.section.url,type:"video/mp4"}})]):t._e()]),t._v(" "),o("mdb-btn",{staticClass:"ml-3",attrs:{color:"primary",inline:""},on:{click:t.newVideo}},[t._v("Change video")]),t._v(" "),o("mdb-btn",{nativeOn:{click:function(e){return t.selectVideo.apply(null,arguments)}}},[t._v("Select video")]),t._v(" "),o("mdb-btn",{attrs:{color:"primary",type:"submit"}},[t._v("Confirm")])],1)])],1),t._v(" "),o("transition",{attrs:{name:"fade"}},[""!=t.msg.message?o("div",{staticClass:"pl-5 mt-4 text-white text-center",class:"bg-"+t.msg.type},[o("p",[t._v(t._s(t.msg.message))])]):t._e()]),t._v(" "),o("mdb-modal",{attrs:{size:"md",show:t.existsModal},on:{close:function(e){t.existsModal=!1}}},[o("mdb-modal-header",[o("mdb-modal-title",[t._v("Video exists with that name")])],1),t._v(" "),o("mdb-modal-body",[o("div",{staticClass:"row col-12 col-md-6 col-lg-4 py-3"},[o("p",[t._v("Would you like to use this one ?")])]),t._v(" "),t.video.content.url?o("video",{staticClass:"video-fluid z-depth-1",attrs:{autoplay:"",loop:"",muted:""},domProps:{muted:!0}},[o("source",{attrs:{src:t.video.content.url,type:"video/mp4"}})]):t._e()]),t._v(" "),o("mdb-modal-footer",[o("mdb-btn",{attrs:{color:"secondary",size:"sm"},nativeOn:{click:function(e){return t.declineUse.apply(null,arguments)}}},[t._v("No")]),t._v(" "),o("mdb-btn",{attrs:{color:"primary",size:"sm"},on:{click:t.confirmUse}},[t._v("Yes")])],1)],1),t._v(" "),o("mdb-modal",{attrs:{size:"md",show:t.uploadVideo},on:{close:t.closeVideoUpload}},[o("mdb-modal-header",[o("mdb-modal-title",[t._v("Upload Video")])],1),t._v(" "),o("mdb-modal-body",[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[o("div",{staticClass:"md-form"},[o("mdb-input",{attrs:{label:"Description",inline:""},model:{value:t.video.alt,callback:function(e){t.$set(t.video,"alt","string"==typeof e?e.trim():e)},expression:"video.alt"}})],1)]),t._v(" "),o("div",{staticClass:"col-12"},[o("div",{staticClass:"input-group"},[o("div",{staticClass:"input-group-prepend"},[o("span",{staticClass:"input-group-text",attrs:{id:"videoInput"}},[t._v("Upload")])]),t._v(" "),o("div",{staticClass:"custom-file"},[o("input",{ref:"VideoInput",staticClass:"custom-file-input",attrs:{id:"VideoInput",type:"file","aria-describedby":"VideoInput",accept:"Video/jpeg Video/png"},on:{change:function(e){return t.checkFile(e)}}}),t._v(" "),t.file.name?o("label",{staticClass:"custom-file-label",attrs:{for:"inputGroupFile01"}},[t._v(t._s(t.file.name))]):o("label",{staticClass:"custom-file-label",attrs:{for:"inputGroupFile01"}},[t._v("Video")])])])])])]),t._v(" "),o("mdb-modal-footer",[o("mdb-btn",{attrs:{color:"secondary",size:"sm"},nativeOn:{click:function(e){return t.closeVideoUpload.apply(null,arguments)}}},[t._v("Close")]),t._v(" "),o("mdb-btn",{attrs:{color:"primary",size:"sm",disabled:""==t.video.alt},on:{click:function(e){return t.saveFile(t.type)}}},[t._v("Save")])],1),t._v(" "),o("transition",{attrs:{name:"fade"}},[""!=t.uploadMsg.message?o("div",{staticClass:"text-white text-center",class:"bg-"+t.uploadMsg.type},[o("p",[t._v(t._s(t.uploadMsg.message))])]):t._e()])],1),t._v(" "),o("mdb-modal",{attrs:{top:"",position:"top","full-height":"",direction:"top",show:t.selectVideoModel},on:{close:function(e){t.selectVideoModel=!1}}},[o("mdb-modal-header",[o("mdb-modal-title",[t._v("Select video")])],1),t._v(" "),o("mdb-modal-body",[o("div",{staticClass:"container-fluid"},[o("div",{staticClass:"row"},t._l(t.videoList,(function(e,n){return o("div",{key:n,staticClass:"col-4 p-0"},[o("div",{staticClass:"custom-control custom-radio d-flex flex-center flex-column py-3"},[o("video",{staticClass:"video-fluid z-depth-1",attrs:{autoplay:"",loop:"",muted:""},domProps:{muted:!0}},[o("source",{attrs:{src:e.url,type:"video/mp4"}})]),t._v(" "),o("input",{staticClass:"custom-control-input",attrs:{id:e.id,type:"radio"},on:{click:function(o){return t.selectedVideo(e)}}}),t._v(" "),o("label",{staticClass:"custom-control-label",attrs:{for:e.id}},[t._v("\n                  "+t._s(e.alt)+"\n                  ")])])])})),0)])]),t._v(" "),o("mdb-modal-footer",[o("mdb-btn",{attrs:{color:"secondary"},nativeOn:{click:function(e){t.selectVideoModel=!1}}},[t._v("Close")]),t._v(" "),o("mdb-btn",{attrs:{color:"primary"},on:{click:t.saveSelection}},[t._v("Confirm")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);